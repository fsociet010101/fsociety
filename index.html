<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>00000</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f172a, #1e293b, #334155);
            color: #e2e8f0;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            overflow-x: hidden;
        }

        .background-effects {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            z-index: 0;
        }

        .circle {
            position: absolute;
            border-radius: 50%;
            background: rgba(34, 197, 94, 0.1);
            filter: blur(40px);
            animation: float 8s ease-in-out infinite;
        }

        .circle:nth-child(1) {
            width: 250px;
            height: 250px;
            top: 10%;
            left: 10%;
            animation-delay: 0s;
        }

        .circle:nth-child(2) {
            width: 350px;
            height: 350px;
            bottom: 10%;
            right: 10%;
            background: rgba(59, 130, 246, 0.1);
            animation-delay: 3s;
        }

        .circle:nth-child(3) {
            width: 180px;
            height: 180px;
            top: 60%;
            left: 70%;
            background: rgba(168, 85, 247, 0.1);
            animation-delay: 6s;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) scale(1) rotate(0deg); }
            33% { transform: translateY(-30px) scale(1.1) rotate(120deg); }
            66% { transform: translateY(15px) scale(0.9) rotate(240deg); }
        }

        .container {
            position: relative;
            z-index: 10;
            text-align: center;
            width: 100%;
            max-width: 600px;
            padding: 20px;
        }

        .title {
            font-size: 3.5rem;
            font-weight: bold;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #22c55e, #3b82f6, #a855f7);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 0 30px rgba(34, 197, 94, 0.3);
            animation: pulse-glow 2s ease-in-out infinite;
        }

        @keyframes pulse-glow {
            0%, 100% { text-shadow: 0 0 30px rgba(34, 197, 94, 0.3); }
            50% { text-shadow: 0 0 50px rgba(34, 197, 94, 0.6); }
        }

        .subtitle {
            font-size: 1.3rem;
            color: #94a3b8;
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .status {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(15px);
            border: 2px solid rgba(34, 197, 94, 0.3);
            border-radius: 20px;
            padding: 1.5rem;
            margin: 1rem 0;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4);
            animation: status-pulse 3s ease-in-out infinite;
        }

        @keyframes status-pulse {
            0%, 100% { 
                box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4), 0 0 20px rgba(34, 197, 94, 0.2); 
                border-color: rgba(34, 197, 94, 0.3);
            }
            50% { 
                box-shadow: 0 15px 40px rgba(0, 0, 0, 0.4), 0 0 40px rgba(34, 197, 94, 0.5); 
                border-color: rgba(34, 197, 94, 0.6);
            }
        }

        .card {
            background: rgba(30, 41, 59, 0.9);
            backdrop-filter: blur(15px);
            border: 1px solid rgba(34, 197, 94, 0.2);
            border-radius: 20px;
            padding: 2.5rem;
            margin: 2rem 0;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.4);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .card:hover {
            transform: translateY(-10px);
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.5);
        }

        .card-title {
            font-size: 1.8rem;
            color: #22c55e;
            margin-bottom: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 1rem;
            font-weight: 600;
        }

        .icon {
            width: 24px;
            height: 24px;
            fill: currentColor;
        }

        .info-grid {
            display: grid;
            gap: 1rem;
        }

        .info-row {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 1rem;
            background: rgba(15, 23, 42, 0.4);
            border-radius: 12px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: all 0.3s ease;
        }

        .info-row:hover {
            background: rgba(15, 23, 42, 0.6);
            border-color: rgba(34, 197, 94, 0.3);
        }

        .info-label {
            display: flex;
            align-items: center;
            gap: 0.8rem;
            color: #94a3b8;
            font-size: 1rem;
            font-weight: 500;
        }

        .info-value {
            color: #e2e8f0;
            font-weight: 600;
            font-family: 'Courier New', monospace;
            max-width: 300px;
            text-align: right;
            word-break: break-word;
            background: rgba(34, 197, 94, 0.1);
            padding: 0.5rem 1rem;
            border-radius: 8px;
            border: 1px solid rgba(34, 197, 94, 0.2);
        }

        .loading {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1.5rem;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 4px solid rgba(34, 197, 94, 0.3);
            border-top: 4px solid #22c55e;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .loading-text {
            font-size: 1.2rem;
            color: #22c55e;
            font-weight: 500;
            animation: pulse-text 1.5s ease-in-out infinite;
        }

        @keyframes pulse-text {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        .coordinates {
            background: rgba(15, 23, 42, 0.6);
            padding: 1.5rem;
            border-radius: 12px;
            margin-top: 1.5rem;
            border: 1px solid rgba(59, 130, 246, 0.3);
        }

        .btn {
            background: linear-gradient(135deg, #22c55e, #16a34a);
            color: white;
            border: none;
            padding: 1rem 2rem;
            border-radius: 12px;
            cursor: pointer;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(34, 197, 94, 0.3);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(34, 197, 94, 0.4);
        }

        .btn:active {
            transform: translateY(0);
        }

        .error {
            color: #ef4444;
            text-align: center;
            padding: 1.5rem;
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
        }

        .accuracy-indicator {
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            padding: 0.3rem 0.8rem;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .accuracy-high {
            background: rgba(34, 197, 94, 0.2);
            color: #22c55e;
            border: 1px solid rgba(34, 197, 94, 0.4);
        }

        .accuracy-medium {
            background: rgba(251, 191, 36, 0.2);
            color: #fbbf24;
            border: 1px solid rgba(251, 191, 36, 0.4);
        }

        .accuracy-low {
            background: rgba(239, 68, 68, 0.2);
            color: #ef4444;
            border: 1px solid rgba(239, 68, 68, 0.4);
        }

        @media (max-width: 640px) {
            .title {
                font-size: 2.5rem;
            }
            
            .card {
                padding: 1.5rem;
                margin: 1rem 0;
            }
            
            .info-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.8rem;
            }
            
            .info-value {
                max-width: 100%;
                text-align: left;
            }
        }
    </style>
</head>
<body>
    <div class="background-effects">
        <div class="circle"></div>
        <div class="circle"></div>
        <div class="circle"></div>
    </div>

    <div class="container">
        <h1 class="title">üíÄ CEO.ONION</h1>
        <p class="subtitle">esta creado por proposito educativo</p>
        
        <div class="status" id="statusCard">
            <div id="statusText">üîç Preparando rastreador de ubicaci√≥n...</div>
        </div>
        
        <div class="card" id="locationCard">
            <div class="card-title">
                <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                    <circle cx="12" cy="10" r="3"></circle>
                </svg>
                Informaci√≥n de Ubicaci√≥n Exacta
            </div>
            
            <div id="loading" class="loading">
                <div class="spinner"></div>
                <div class="loading-text" id="loadingText">Iniciando rastreo GPS...</div>
            </div>
            
            <div id="content" style="display: none;">
                <div class="info-grid">
                    <div class="info-row">
                        <div class="info-label">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="2" y1="12" x2="22" y2="12"></line>
                                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                            </svg>
                            IP Real:
                        </div>
                        <div class="info-value" id="ip">Detectando...</div>
                    </div>
                    
                    <div class="info-row">
                        <div class="info-label">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path>
                                <circle cx="12" cy="10" r="3"></circle>
                            </svg>
                            Ubicaci√≥n:
                        </div>
                        <div class="info-value" id="location">Rastreando...</div>
                    </div>
                    
                    <div class="info-row">
                        <div class="info-label">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"></path>
                                <polyline points="9,22 9,12 15,12 15,22"></polyline>
                            </svg>
                            Direcci√≥n Exacta:
                        </div>
                        <div class="info-value" id="exactAddress">Obteniendo coordenadas...</div>
                    </div>
                    
                    <div class="info-row">
                        <div class="info-label">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <line x1="2" y1="12" x2="22" y2="12"></line>
                                <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
                            </svg>
                            Pa√≠s / Regi√≥n:
                        </div>
                        <div class="info-value" id="country">Identificando...</div>
                    </div>
                    
                    <div class="info-row">
                        <div class="info-label">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="10"></circle>
                                <polyline points="12,6 12,12 16,14"></polyline>
                            </svg>
                            Zona Horaria:
                        </div>
                        <div class="info-value" id="timezone">Calculando...</div>
                    </div>
                    
                    <div class="info-row">
                        <div class="info-label">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M12 20h9"></path>
                                <path d="M16.5 3.5a2.121 2.121 0 0 1 3 3L7 19l-4 1 1-4L16.5 3.5z"></path>
                            </svg>
                            Proveedor (ISP):
                        </div>
                        <div class="info-value" id="isp">Analizando...</div>
                    </div>
                    
                    <div class="info-row">
                        <div class="info-label">
                            <svg class="icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <circle cx="12" cy="12" r="3"></circle>
                                <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1 1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
                            </svg>
                            Precisi√≥n GPS:
                        </div>
                        <div class="info-value" id="accuracy">Midiendo...</div>
                    </div>
                </div>
                
                <div class="coordinates" id="coordinatesDiv" style="display: none;">
                    <div style="color: #3b82f6; font-weight: 600; margin-bottom: 0.5rem;">üìç Coordenadas GPS Exactas:</div>
                    <div style="font-family: 'Courier New', monospace; font-size: 1.1rem;" id="coordinates"></div>
                    <div style="margin-top: 0.5rem; font-size: 0.9rem; color: #94a3b8;">
                        Precisi√≥n: ¬±<span id="precisionValue">calculando</span> metros
                    </div>
                </div>
            </div>
            
            <div id="error" class="error" style="display: none;">
                ‚ùå Error al obtener la informaci√≥n de ubicaci√≥n
                <br><br>
                <button class="btn" onclick="startLocationTracking()">
                    üîÑ Reintentar Rastreo
                </button>
            </div>
        </div>
    </div>

    <script>
        let watchId = null;
        let locationData = {};

        // Estados de carga con emojis y mensajes m√°s espec√≠ficos
        const loadingStates = [
            'üõ∞Ô∏è Conectando con sat√©lites GPS...',
            'üì° Triangulando posici√≥n exacta...',
            'üéØ Refinando coordenadas...',
            'üè† Obteniendo direcci√≥n espec√≠fica...',
            'üåç Validando ubicaci√≥n...',
            '‚úÖ Finalizando rastreo...'
        ];
        let currentState = 0;

        // Funci√≥n para actualizar el estado
        function updateStatus(message, isSuccess = false) {
            const statusCard = document.getElementById('statusCard');
            const statusText = document.getElementById('statusText');
            
            statusText.innerHTML = message;
            
            if (isSuccess) {
                statusCard.style.borderColor = 'rgba(34, 197, 94, 0.6)';
                statusCard.style.background = 'rgba(34, 197, 94, 0.1)';
            }
        }

        function updateLoadingText() {
            const loadingText = document.getElementById('loadingText');
            if (loadingText && document.getElementById('loading').style.display !== 'none') {
                loadingText.textContent = loadingStates[currentState];
                currentState = (currentState + 1) % loadingStates.length;
            }
        }

        // Obtener IP real usando m√∫ltiples servicios
        async function getRealIP() {
            const ipServices = [
                'https://api.ipify.org?format=json',
                'https://api64.ipify.org?format=json',
                'https://ipapi.co/ip/',
                'https://ipinfo.io/ip',
                'https://api.myip.com'
            ];

            for (const service of ipServices) {
                try {
                    const response = await fetch(service);
                    if (service.includes('json')) {
                        const data = await response.json();
                        return data.ip;
                    } else {
                        const ip = await response.text();
                        return ip.trim();
                    }
                } catch (e) {
                    continue;
                }
            }
            return 'No detectada';
        }

        // Obtener informaci√≥n detallada de IP
        async function getDetailedIPInfo(ip) {
            const services = [
                {
                    url: `https://ipapi.co/${ip}/json/`,
                    parser: (data) => ({
                        country: data.country_name,
                        region: `${data.city}, ${data.region}`,
                        timezone: data.timezone,
                        isp: data.org,
                        lat: data.latitude,
                        lon: data.longitude
                    })
                },
                {
                    url: `http://ip-api.com/json/${ip}`,
                    parser: (data) => ({
                        country: data.country,
                        region: `${data.city}, ${data.regionName}`,
                        timezone: data.timezone,
                        isp: data.isp,
                        lat: data.lat,
                        lon: data.lon
                    })
                }
            ];

            for (const service of services) {
                try {
                    const response = await fetch(service.url);
                    const data = await response.json();
                    return service.parser(data);
                } catch (e) {
                    continue;
                }
            }
            return null;
        }

        // Obtener direcci√≥n exacta con m√∫ltiples servicios de alta precisi√≥n
        async function getExactAddress(lat, lon) {
            const services = [
                {
                    name: 'nominatim_ultra',
                    url: `https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}&zoom=19&addressdetails=1&extratags=1&namedetails=1`,
                    headers: { 'User-Agent': 'LocationTracker/1.0' }
                },
                {
                    name: 'bigdatacloud',
                    url: `https://api.bigdatacloud.net/data/reverse-geocode-client?latitude=${lat}&longitude=${lon}&localityLanguage=es`
                },
                {
                    name: 'photon',
                    url: `https://photon.komoot.io/reverse?lat=${lat}&lon=${lon}&lang=es`
                }
            ];

            for (const service of services) {
                try {
                    const response = await fetch(service.url, { 
                        headers: service.headers || {} 
                    });
                    const data = await response.json();

                    if (service.name === 'nominatim_ultra') {
                        if (data.address) {
                            const addr = data.address;
                            const parts = [];
                            
                            // Construir direcci√≥n con m√°ximo detalle
                            if (addr.house_number && addr.road) {
                                parts.push(`${addr.house_number} ${addr.road}`);
                            } else if (addr.road) {
                                parts.push(addr.road);
                            }
                            
                            if (addr.neighbourhood) parts.push(addr.neighbourhood);
                            if (addr.suburb) parts.push(addr.suburb);
                            if (addr.city || addr.town || addr.village) {
                                parts.push(addr.city || addr.town || addr.village);
                            }
                            if (addr.state) parts.push(addr.state);
                            if (addr.country) parts.push(addr.country);
                            
                            if (parts.length > 0) {
                                return parts.join(', ');
                            }
                        }
                        return data.display_name;
                    } else if (service.name === 'bigdatacloud') {
                        return data.locality || `${data.city}, ${data.principalSubdivision}, ${data.countryName}`;
                    } else if (service.name === 'photon') {
                        if (data.features && data.features[0]) {
                            return data.features[0].properties.name || data.features[0].properties.street;
                        }
                    }
                } catch (e) {
                    continue;
                }
            }
            
            return `Coordenadas: ${lat.toFixed(6)}, ${lon.toFixed(6)}`;
        }

        // Obtener ubicaci√≥n GPS de alta precisi√≥n
        function getHighPrecisionLocation() {
            return new Promise((resolve, reject) => {
                if (!navigator.geolocation) {
                    reject(new Error('Geolocalizaci√≥n no soportada'));
                    return;
                }

                const options = {
                    enableHighAccuracy: true,
                    timeout: 30000,
                    maximumAge: 0
                };

                let bestAccuracy = Infinity;
                let bestPosition = null;
                let attempts = 0;
                const maxAttempts = 3;

                function tryGetLocation() {
                    navigator.geolocation.getCurrentPosition(
                        (position) => {
                            attempts++;
                            
                            if (position.coords.accuracy < bestAccuracy) {
                                bestAccuracy = position.coords.accuracy;
                                bestPosition = position;
                            }

                            // Si tenemos buena precisi√≥n o hemos intentado suficientes veces
                            if (position.coords.accuracy <= 10 || attempts >= maxAttempts) {
                                resolve(bestPosition || position);
                            } else {
                                // Intentar una vez m√°s para mejor precisi√≥n
                                setTimeout(tryGetLocation, 1000);
                            }
                        },
                        (error) => {
                            if (attempts === 0) {
                                reject(error);
                            } else {
                                resolve(bestPosition);
                            }
                        },
                        options
                    );
                }

                tryGetLocation();
            });
        }

        // Funci√≥n principal de rastreo
        async function startLocationTracking() {
            try {
                updateStatus('üîç Iniciando rastreo de ubicaci√≥n exacta...');
                
                document.getElementById('loading').style.display = 'flex';
                document.getElementById('content').style.display = 'none';
                document.getElementById('error').style.display = 'none';

                // Obtener IP real primero
                updateStatus('üåê Detectando IP real...');
                const realIP = await getRealIP();
                document.getElementById('ip').textContent = realIP;

                // Solicitar ubicaci√≥n GPS de alta precisi√≥n
                updateStatus('üõ∞Ô∏è Solicitando acceso GPS de alta precisi√≥n...');
                
                try {
                    const position = await getHighPrecisionLocation();
                    const lat = position.coords.latitude;
                    const lon = position.coords.longitude;
                    const accuracy = position.coords.accuracy;

                    updateStatus('‚úÖ GPS conectado - Obteniendo ubicaci√≥n exacta...');

                    // Mostrar datos inmediatamente
                    document.getElementById('loading').style.display = 'none';
                    document.getElementById('content').style.display = 'block';

                    // Actualizar coordenadas
                    document.getElementById('coordinates').textContent = 
                        `${lat.toFixed(8)}, ${lon.toFixed(8)}`;
                    document.getElementById('precisionValue').textContent = Math.round(accuracy);
                    document.getElementById('coordinatesDiv').style.display = 'block';

                    // Indicador de precisi√≥n
                    let accuracyClass, accuracyText;
                    if (accuracy <= 10) {
                        accuracyClass = 'accuracy-high';
                        accuracyText = 'üéØ Muy Alta';
                    } else if (accuracy <= 50) {
                        accuracyClass = 'accuracy-medium';
                        accuracyText = 'üìç Alta';
                    } else {
                        accuracyClass = 'accuracy-low';
                        accuracyText = 'üì± Media';
                    }
                    
                    document.getElementById('accuracy').innerHTML = 
                        `<span class="accuracy-indicator ${accuracyClass}">${accuracyText}</span>`;

                    // Obtener direcci√≥n exacta
                    updateStatus('üè† Obteniendo direcci√≥n exacta...');
                    const exactAddress = await getExactAddress(lat, lon);
                    document.getElementById('exactAddress').textContent = exactAddress;
                    document.getElementById('location').textContent = 'GPS Exacto';

                    // Obtener informaci√≥n adicional
                    const ipInfo = await getDetailedIPInfo(realIP);
                    if (ipInfo) {
                        document.getElementById('country').textContent = ipInfo.country;
                        document.getElementById('timezone').textContent = ipInfo.timezone;
                        document.getElementById('isp').textContent = ipInfo.isp;
                    }

                    updateStatus('‚úÖ Ubicaci√≥n exacta obtenida con √©xito', true);

                } catch (gpsError) {
                    // Fallback a ubicaci√≥n por IP
                    updateStatus('üì± GPS no disponible - Usando ubicaci√≥n por IP...');
                    
                    const ipInfo = await getDetailedIPInfo(realIP);
                    if (ipInfo && ipInfo.lat && ipInfo.lon) {
                        document.getElementById('loading').style.display = 'none';
                        document.getElementById('content').style.display = 'block';

                        document.getElementById('location').textContent = ipInfo.region;
                        document.getElementById('country').textContent = ipInfo.country;
                        document.getElementById('timezone').textContent = ipInfo.timezone;
                        document.getElementById('isp').textContent = ipInfo.isp;
                        document.getElementById('accuracy').innerHTML = 
                            '<span class="accuracy-indicator accuracy-low">üìç Por IP</span>';

                        // Obtener direcci√≥n aproximada
                        const address = await getExactAddress(ipInfo.lat, ipInfo.lon);
                        document.getElementById('exactAddress').textContent = 
                            `${address} (Aproximada por IP)`;

                        document.getElementById('coordinates').textContent = 
                            `${ipInfo.lat.toFixed(6)}, ${ipInfo.lon.toFixed(6)}`;
                        document.getElementById('precisionValue').textContent = '~1000';
                        document.getElementById('coordinatesDiv').style.display = 'block';

                        updateStatus('‚ö†Ô∏è Ubicaci√≥n aproximada obtenida por IP', false);
                    } else {
                        throw new Error('No se pudo obtener ubicaci√≥n');
                    }
                }

            } catch (error) {
                console.error('Error:', error);
                document.getElementById('loading').style.display = 'none';
                document.getElementById('error').style.display = 'block';
                updateStatus('‚ùå Error en el rastreo de ubicaci√≥n');
            }
        }

        // Iniciar autom√°ticamente cuando se carga la p√°gina - SIN PREGUNTAS
        window.addEventListener('load', () => {
            // Iniciar rastreo inmediatamente sin modales ni preguntas
            setTimeout(startLocationTracking, 500); // Peque√±o delay para que cargue bien
        });

        // Animaci√≥n del texto de carga
        setInterval(updateLoadingText, 2000);

        // Monitoreo continuo de ubicaci√≥n (opcional)
        function startContinuousTracking() {
            if ('geolocation' in navigator) {
                const options = {
                    enableHighAccuracy: true,
                    maximumAge: 30000,
                    timeout: 27000
                };

                watchId = navigator.geolocation.watchPosition(
                    (position) => {
                        // Actualizar si la precisi√≥n mejora
                        if (position.coords.accuracy < 50) {
                            const lat = position.coords.latitude;
                            const lon = position.coords.longitude;
                            document.getElementById('coordinates').textContent = 
                                `${lat.toFixed(8)}, ${lon.toFixed(8)}`;
                            document.getElementById('precisionValue').textContent = 
                                Math.round(position.coords.accuracy);
                        }
                    },
                    (error) => console.log('Error en rastreo continuo:', error),
                    options
                );
            }
        }
    </script>
</body>
</html>